{% extends 'base.html' %}

<script Language="JavaScript"></script>

minutesToCount = 10;

function startclock() {

  if (minutesToCount!=0) {
    finalTime = new Date();
    minutesEnd = finalTime.getMinutes() + minutesToCount;
    finalTime.setMinutes(minutesEnd, finalTime.getSeconds(), finalTime.getMilliseconds());
    minutesToCount = 0;
  }

  currentTime = new Date();
  milliSecLeft = finalTime.getTime() - currentTime.getTime();
  currentTime.setTime(milliSecLeft);

  //Calculate and format the time elements
  minutes = currentTime.getMinutes();
  if (minutes < 10) { minutes = '0' + minutes; }
  seconds = currentTime.getSeconds();
  if (seconds < 10) { seconds = '0' + seconds; }
  milliseconds = currentTime.getMilliseconds();

  //Display the time left
  timeLeftText = minutes + ':' + seconds + ':' + milliseconds;
  document.getElementById('timeLeft').innerHTML = timeLeftText;

  //Recall the function if there is time left - or display end time
  if (milliSecLeft > 0) {
    setTimeout("startclock()",10);
  } else {
    document.getElementById('timeLeft').innerHTML = '00:00:000';
  }
}

</script>


{% block content %}
<div class='launch'>
	{{ form_answers.management_form }}	
	{% csrf_token %}
	<h1>Passing Test {{ DynMCQTestInfo.id_test }} : {{DynMCQTestInfo.title}}</h1>
	<br><br>	
	<body onLoad="">
		Time Left: <span id="timeLeft"></span>
	  <br><br>
	  <button onclick="startclock();">Start</button>
	</body>
	<br><br>
	<button name = "stop" type ="submit" onclick = "location.href='{{ DynMCQTestInfo.launch_home }}'">STOP</button>
	<br><br>
	{%for instance in Questions_Answers_List%}
		{% if instance in DynMCQquestions_List %}
			<h3>Question {{instance.q_num}} : {{instance.q_text}}</h3>
		{% else %}
			{% if instance.right_ans == 1 %}
				<p><b><u>Réponse {{instance.ans_num}} : {{instance.ans_text}}</u></b></p>
			{% else %}
				<p>Réponse {{instance.ans_num}} : {{instance.ans_text}}</p>
			{% endif %}
		{% endif %}
	{%endfor%}
	<br/>
</div>

{% endblock content %}
